(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{259:function(e,t,a){e.exports=a.p+"static/media/dataset.649191b6.png"},275:function(e,t,a){e.exports=a(510)},280:function(e,t,a){},423:function(e,t){},425:function(e,t){},457:function(e,t){},458:function(e,t){},504:function(e,t){},505:function(e,t){},506:function(e,t){},510:function(e,t,a){"use strict";a.r(t);var l=a(1),i=a.n(l),s=a(70),n=a.n(s),p=(a(280),a(27)),r=a(28),h=a(33),c=a(32),o=a(34),d=a(73),_=a(57),g=a(523),w=a(517),u=function(){return i.a.createElement(g.a,{fixed:"top",inverted:!0},i.a.createElement(w.a,null,i.a.createElement(g.a.Item,{header:!0},i.a.createElement(d.b,{to:"/"},"mlviz")),i.a.createElement(g.a.Item,null,i.a.createElement(d.b,{to:"/gradient_descent"},"Gradient Descent")),i.a.createElement(g.a.Item,null,i.a.createElement(d.b,{to:"/mnist"},"MNIST"))))},m=a(525),v=a(524),f=a(87),b=a.n(f),E=a(242),D=a.n(E),y=a(115),x=a(243);D()(b.a);var k=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(h.a)(this,Object(c.a)(t).call(this))).addPoint=function(t){var a=[t.xAxis[0].value,t.yAxis[0].value],l=e.props.data.concat([a]);e.props.updateData(l)},e.removePoint=function(t){if("data"===t.point.series.userOptions.id&&!(e.props.data.length<=2)){var a=[t.point.x,t.point.y],l=e.props.data.filter(function(e){return!Object(x.isEqual)(e,a)});e.props.updateData(l)}},e.chart=null,e.id="linearRegression",e}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&this.chart.series[0].update({data:this.props.data}),e.regressionData!==this.props.regressionData&&this.chart.series[1].update({data:this.props.regressionData})}},{key:"componentDidMount",value:function(){var e={chart:{type:"scatter",zoomType:"xy",events:{click:this.addPoint}},credits:{enabled:!1},title:{text:""},subtitle:{text:"Click the plot area to add a point. Click a point to remove it."},xAxis:{enabled:!0,title:{text:"x"},gridLineWidth:1,minPadding:.5,maxPadding:.5},yAxis:{title:{text:"y"},minPadding:.5,maxPadding:.5},exporting:{enabled:!0},plotOptions:{series:{point:{events:{click:this.removePoint}}}},series:[{id:"data",name:"Data",data:this.props.data},{type:"line",id:"regression",name:"Regression Line",data:this.props.regressionData,marker:{enabled:!1},states:{hover:{lineWidth:0}},enableMouseTracking:!1}]};this.chart=new b.a.chart(this.id,e)}},{key:"componentWillUnmount",value:function(){this.chart.destroy()}},{key:"render",value:function(){return i.a.createElement(v.a.Group,null,i.a.createElement(v.a,null,i.a.createElement("b",null,"Regression data"),this.props.epoch>0&&i.a.createElement(y.a.Group,{size:"medium",style:{display:"inline"}},i.a.createElement(y.a,{className:"first-label"},"epoch: ",this.props.epoch),i.a.createElement(y.a,{className:"labels"},"k: ",this.props.k.toFixed(3)),i.a.createElement(y.a,{className:"labels"},"b: ",this.props.b.toFixed(3)),i.a.createElement(y.a,{className:"labels"},"learning rate: ",this.props.lr))),i.a.createElement(v.a,{style:{padding:0}},i.a.createElement("div",{id:this.id})))}}]),t}(i.a.Component),C=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(c.a)(t).call(this,e))).chart=null,a.id="chart"+Math.random(),a.updateStep=e.updateStep||10,a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.trainData,l=t.valData;e.trainData!==a&&a.length%this.updateStep===0&&this.chart.series[0].update({data:a}),e.valData!==l&&this.chart.series[1].update({data:l})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.trainData,a=e.valData,l=e.yTitle,i={chart:{type:"line",height:250},credits:{enabled:!1},title:{text:""},xAxis:{enabled:!0,title:{text:e.xTitle||"batch"}},yAxis:{title:{text:l},minPadding:0,maxPadding:0},legend:{enabled:!!a},exporting:{enabled:!1},plotOptions:{series:{lineWidth:1,marker:{enabled:!1}}},series:[{id:"train",name:"Train",data:t},!!a&&{id:"val",name:"Validation",data:a}].filter(Boolean)};this.chart=new b.a.chart(this.id,i)}},{key:"componentWillUnmount",value:function(){this.chart.destroy()}},{key:"render",value:function(){return i.a.createElement(v.a.Group,null,i.a.createElement(v.a,null,i.a.createElement("b",null,this.props.title)),i.a.createElement(v.a,{style:{padding:0}},i.a.createElement("div",{id:this.id})))}}]),t}(i.a.Component),O=a(518),j=a(522),I=a(520),S=function(e){return i.a.createElement(O.a,null,i.a.createElement(O.a.Group,{inline:!0},i.a.createElement(O.a.Field,null,i.a.createElement("label",null,"Dataset:"),i.a.createElement(j.a,{as:"div",labelPosition:"left"},i.a.createElement(I.a,{placeholder:"Dataset",options:e.datasets,selection:!0,className:"label",value:e.dataset,onChange:e.onDatasetChange}),i.a.createElement(j.a,{content:"Load",onClick:e.loadDataset,disabled:e.training}))),e.training?i.a.createElement(j.a,{content:"Stop",icon:"stop",labelPosition:"right",onClick:e.stopTraining}):i.a.createElement(j.a,{content:"Train",icon:"play",labelPosition:"right",onClick:e.startTraining}),!e.training&&e.epoch>0&&i.a.createElement(j.a,{content:"Clear",icon:"redo",labelPosition:"right",onClick:e.clearData})))},T=function(e){switch(e){case"two_points":return L;default:return P.filter(function(t){return t.species===e}).map(function(e){return[e.sepal_length,e.sepal_width]})}},L=[[10,10],[90,90]],P=[{sepal_length:5.1,sepal_width:3.5,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:4.9,sepal_width:3,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:4.7,sepal_width:3.2,petal_length:1.3,petal_width:.2,species:"setosa"},{sepal_length:4.6,sepal_width:3.1,petal_length:1.5,petal_width:.2,species:"setosa"},{sepal_length:5,sepal_width:3.6,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:4.6,sepal_width:3.4,petal_length:1.4,petal_width:.3,species:"setosa"},{sepal_length:5,sepal_width:3.4,petal_length:1.5,petal_width:.2,species:"setosa"},{sepal_length:4.4,sepal_width:2.9,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:4.9,sepal_width:3.1,petal_length:1.5,petal_width:.1,species:"setosa"},{sepal_length:5.4,sepal_width:3.7,petal_length:1.5,petal_width:.2,species:"setosa"},{sepal_length:4.8,sepal_width:3.4,petal_length:1.6,petal_width:.2,species:"setosa"},{sepal_length:4.8,sepal_width:3,petal_length:1.4,petal_width:.1,species:"setosa"},{sepal_length:4.3,sepal_width:3,petal_length:1.1,petal_width:.1,species:"setosa"},{sepal_length:5.8,sepal_width:4,petal_length:1.2,petal_width:.2,species:"setosa"},{sepal_length:5.7,sepal_width:4.4,petal_length:1.5,petal_width:.4,species:"setosa"},{sepal_length:5.4,sepal_width:3.9,petal_length:1.3,petal_width:.4,species:"setosa"},{sepal_length:5.1,sepal_width:3.5,petal_length:1.4,petal_width:.3,species:"setosa"},{sepal_length:5.7,sepal_width:3.8,petal_length:1.7,petal_width:.3,species:"setosa"},{sepal_length:5.1,sepal_width:3.8,petal_length:1.5,petal_width:.3,species:"setosa"},{sepal_length:5.4,sepal_width:3.4,petal_length:1.7,petal_width:.2,species:"setosa"},{sepal_length:5.1,sepal_width:3.7,petal_length:1.5,petal_width:.4,species:"setosa"},{sepal_length:4.6,sepal_width:3.6,petal_length:1,petal_width:.2,species:"setosa"},{sepal_length:5.1,sepal_width:3.3,petal_length:1.7,petal_width:.5,species:"setosa"},{sepal_length:4.8,sepal_width:3.4,petal_length:1.9,petal_width:.2,species:"setosa"},{sepal_length:5,sepal_width:3,petal_length:1.6,petal_width:.2,species:"setosa"},{sepal_length:5,sepal_width:3.4,petal_length:1.6,petal_width:.4,species:"setosa"},{sepal_length:5.2,sepal_width:3.5,petal_length:1.5,petal_width:.2,species:"setosa"},{sepal_length:5.2,sepal_width:3.4,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:4.7,sepal_width:3.2,petal_length:1.6,petal_width:.2,species:"setosa"},{sepal_length:4.8,sepal_width:3.1,petal_length:1.6,petal_width:.2,species:"setosa"},{sepal_length:5.4,sepal_width:3.4,petal_length:1.5,petal_width:.4,species:"setosa"},{sepal_length:5.2,sepal_width:4.1,petal_length:1.5,petal_width:.1,species:"setosa"},{sepal_length:5.5,sepal_width:4.2,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:4.9,sepal_width:3.1,petal_length:1.5,petal_width:.1,species:"setosa"},{sepal_length:5,sepal_width:3.2,petal_length:1.2,petal_width:.2,species:"setosa"},{sepal_length:5.5,sepal_width:3.5,petal_length:1.3,petal_width:.2,species:"setosa"},{sepal_length:4.9,sepal_width:3.1,petal_length:1.5,petal_width:.1,species:"setosa"},{sepal_length:4.4,sepal_width:3,petal_length:1.3,petal_width:.2,species:"setosa"},{sepal_length:5.1,sepal_width:3.4,petal_length:1.5,petal_width:.2,species:"setosa"},{sepal_length:5,sepal_width:3.5,petal_length:1.3,petal_width:.3,species:"setosa"},{sepal_length:4.5,sepal_width:2.3,petal_length:1.3,petal_width:.3,species:"setosa"},{sepal_length:4.4,sepal_width:3.2,petal_length:1.3,petal_width:.2,species:"setosa"},{sepal_length:5,sepal_width:3.5,petal_length:1.6,petal_width:.6,species:"setosa"},{sepal_length:5.1,sepal_width:3.8,petal_length:1.9,petal_width:.4,species:"setosa"},{sepal_length:4.8,sepal_width:3,petal_length:1.4,petal_width:.3,species:"setosa"},{sepal_length:5.1,sepal_width:3.8,petal_length:1.6,petal_width:.2,species:"setosa"},{sepal_length:4.6,sepal_width:3.2,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:5.3,sepal_width:3.7,petal_length:1.5,petal_width:.2,species:"setosa"},{sepal_length:5,sepal_width:3.3,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:7,sepal_width:3.2,petal_length:4.7,petal_width:1.4,species:"versicolor"},{sepal_length:6.4,sepal_width:3.2,petal_length:4.5,petal_width:1.5,species:"versicolor"},{sepal_length:6.9,sepal_width:3.1,petal_length:4.9,petal_width:1.5,species:"versicolor"},{sepal_length:5.5,sepal_width:2.3,petal_length:4,petal_width:1.3,species:"versicolor"},{sepal_length:6.5,sepal_width:2.8,petal_length:4.6,petal_width:1.5,species:"versicolor"},{sepal_length:5.7,sepal_width:2.8,petal_length:4.5,petal_width:1.3,species:"versicolor"},{sepal_length:6.3,sepal_width:3.3,petal_length:4.7,petal_width:1.6,species:"versicolor"},{sepal_length:4.9,sepal_width:2.4,petal_length:3.3,petal_width:1,species:"versicolor"},{sepal_length:6.6,sepal_width:2.9,petal_length:4.6,petal_width:1.3,species:"versicolor"},{sepal_length:5.2,sepal_width:2.7,petal_length:3.9,petal_width:1.4,species:"versicolor"},{sepal_length:5,sepal_width:2,petal_length:3.5,petal_width:1,species:"versicolor"},{sepal_length:5.9,sepal_width:3,petal_length:4.2,petal_width:1.5,species:"versicolor"},{sepal_length:6,sepal_width:2.2,petal_length:4,petal_width:1,species:"versicolor"},{sepal_length:6.1,sepal_width:2.9,petal_length:4.7,petal_width:1.4,species:"versicolor"},{sepal_length:5.6,sepal_width:2.9,petal_length:3.6,petal_width:1.3,species:"versicolor"},{sepal_length:6.7,sepal_width:3.1,petal_length:4.4,petal_width:1.4,species:"versicolor"},{sepal_length:5.6,sepal_width:3,petal_length:4.5,petal_width:1.5,species:"versicolor"},{sepal_length:5.8,sepal_width:2.7,petal_length:4.1,petal_width:1,species:"versicolor"},{sepal_length:6.2,sepal_width:2.2,petal_length:4.5,petal_width:1.5,species:"versicolor"},{sepal_length:5.6,sepal_width:2.5,petal_length:3.9,petal_width:1.1,species:"versicolor"},{sepal_length:5.9,sepal_width:3.2,petal_length:4.8,petal_width:1.8,species:"versicolor"},{sepal_length:6.1,sepal_width:2.8,petal_length:4,petal_width:1.3,species:"versicolor"},{sepal_length:6.3,sepal_width:2.5,petal_length:4.9,petal_width:1.5,species:"versicolor"},{sepal_length:6.1,sepal_width:2.8,petal_length:4.7,petal_width:1.2,species:"versicolor"},{sepal_length:6.4,sepal_width:2.9,petal_length:4.3,petal_width:1.3,species:"versicolor"},{sepal_length:6.6,sepal_width:3,petal_length:4.4,petal_width:1.4,species:"versicolor"},{sepal_length:6.8,sepal_width:2.8,petal_length:4.8,petal_width:1.4,species:"versicolor"},{sepal_length:6.7,sepal_width:3,petal_length:5,petal_width:1.7,species:"versicolor"},{sepal_length:6,sepal_width:2.9,petal_length:4.5,petal_width:1.5,species:"versicolor"},{sepal_length:5.7,sepal_width:2.6,petal_length:3.5,petal_width:1,species:"versicolor"},{sepal_length:5.5,sepal_width:2.4,petal_length:3.8,petal_width:1.1,species:"versicolor"},{sepal_length:5.5,sepal_width:2.4,petal_length:3.7,petal_width:1,species:"versicolor"},{sepal_length:5.8,sepal_width:2.7,petal_length:3.9,petal_width:1.2,species:"versicolor"},{sepal_length:6,sepal_width:2.7,petal_length:5.1,petal_width:1.6,species:"versicolor"},{sepal_length:5.4,sepal_width:3,petal_length:4.5,petal_width:1.5,species:"versicolor"},{sepal_length:6,sepal_width:3.4,petal_length:4.5,petal_width:1.6,species:"versicolor"},{sepal_length:6.7,sepal_width:3.1,petal_length:4.7,petal_width:1.5,species:"versicolor"},{sepal_length:6.3,sepal_width:2.3,petal_length:4.4,petal_width:1.3,species:"versicolor"},{sepal_length:5.6,sepal_width:3,petal_length:4.1,petal_width:1.3,species:"versicolor"},{sepal_length:5.5,sepal_width:2.5,petal_length:4,petal_width:1.3,species:"versicolor"},{sepal_length:5.5,sepal_width:2.6,petal_length:4.4,petal_width:1.2,species:"versicolor"},{sepal_length:6.1,sepal_width:3,petal_length:4.6,petal_width:1.4,species:"versicolor"},{sepal_length:5.8,sepal_width:2.6,petal_length:4,petal_width:1.2,species:"versicolor"},{sepal_length:5,sepal_width:2.3,petal_length:3.3,petal_width:1,species:"versicolor"},{sepal_length:5.6,sepal_width:2.7,petal_length:4.2,petal_width:1.3,species:"versicolor"},{sepal_length:5.7,sepal_width:3,petal_length:4.2,petal_width:1.2,species:"versicolor"},{sepal_length:6.2,sepal_width:2.9,petal_length:4.3,petal_width:1.3,species:"versicolor"},{sepal_length:5.1,sepal_width:2.5,petal_length:3,petal_width:1.1,species:"versicolor"},{sepal_length:5.7,sepal_width:2.8,petal_length:4.1,petal_width:1.3,species:"versicolor"},{sepal_length:6.3,sepal_width:3.3,petal_length:6,petal_width:2.5,species:"virginica"},{sepal_length:5.8,sepal_width:2.7,petal_length:5.1,petal_width:1.9,species:"virginica"},{sepal_length:7.1,sepal_width:3,petal_length:5.9,petal_width:2.1,species:"virginica"},{sepal_length:6.3,sepal_width:2.9,petal_length:5.6,petal_width:1.8,species:"virginica"},{sepal_length:6.5,sepal_width:3,petal_length:5.8,petal_width:2.2,species:"virginica"},{sepal_length:7.6,sepal_width:3,petal_length:6.6,petal_width:2.1,species:"virginica"},{sepal_length:4.9,sepal_width:2.5,petal_length:4.5,petal_width:1.7,species:"virginica"},{sepal_length:7.3,sepal_width:2.9,petal_length:6.3,petal_width:1.8,species:"virginica"},{sepal_length:6.7,sepal_width:2.5,petal_length:5.8,petal_width:1.8,species:"virginica"},{sepal_length:7.2,sepal_width:3.6,petal_length:6.1,petal_width:2.5,species:"virginica"},{sepal_length:6.5,sepal_width:3.2,petal_length:5.1,petal_width:2,species:"virginica"},{sepal_length:6.4,sepal_width:2.7,petal_length:5.3,petal_width:1.9,species:"virginica"},{sepal_length:6.8,sepal_width:3,petal_length:5.5,petal_width:2.1,species:"virginica"},{sepal_length:5.7,sepal_width:2.5,petal_length:5,petal_width:2,species:"virginica"},{sepal_length:5.8,sepal_width:2.8,petal_length:5.1,petal_width:2.4,species:"virginica"},{sepal_length:6.4,sepal_width:3.2,petal_length:5.3,petal_width:2.3,species:"virginica"},{sepal_length:6.5,sepal_width:3,petal_length:5.5,petal_width:1.8,species:"virginica"},{sepal_length:7.7,sepal_width:3.8,petal_length:6.7,petal_width:2.2,species:"virginica"},{sepal_length:7.7,sepal_width:2.6,petal_length:6.9,petal_width:2.3,species:"virginica"},{sepal_length:6,sepal_width:2.2,petal_length:5,petal_width:1.5,species:"virginica"},{sepal_length:6.9,sepal_width:3.2,petal_length:5.7,petal_width:2.3,species:"virginica"},{sepal_length:5.6,sepal_width:2.8,petal_length:4.9,petal_width:2,species:"virginica"},{sepal_length:7.7,sepal_width:2.8,petal_length:6.7,petal_width:2,species:"virginica"},{sepal_length:6.3,sepal_width:2.7,petal_length:4.9,petal_width:1.8,species:"virginica"},{sepal_length:6.7,sepal_width:3.3,petal_length:5.7,petal_width:2.1,species:"virginica"},{sepal_length:7.2,sepal_width:3.2,petal_length:6,petal_width:1.8,species:"virginica"},{sepal_length:6.2,sepal_width:2.8,petal_length:4.8,petal_width:1.8,species:"virginica"},{sepal_length:6.1,sepal_width:3,petal_length:4.9,petal_width:1.8,species:"virginica"},{sepal_length:6.4,sepal_width:2.8,petal_length:5.6,petal_width:2.1,species:"virginica"},{sepal_length:7.2,sepal_width:3,petal_length:5.8,petal_width:1.6,species:"virginica"},{sepal_length:7.4,sepal_width:2.8,petal_length:6.1,petal_width:1.9,species:"virginica"},{sepal_length:7.9,sepal_width:3.8,petal_length:6.4,petal_width:2,species:"virginica"},{sepal_length:6.4,sepal_width:2.8,petal_length:5.6,petal_width:2.2,species:"virginica"},{sepal_length:6.3,sepal_width:2.8,petal_length:5.1,petal_width:1.5,species:"virginica"},{sepal_length:6.1,sepal_width:2.6,petal_length:5.6,petal_width:1.4,species:"virginica"},{sepal_length:7.7,sepal_width:3,petal_length:6.1,petal_width:2.3,species:"virginica"},{sepal_length:6.3,sepal_width:3.4,petal_length:5.6,petal_width:2.4,species:"virginica"},{sepal_length:6.4,sepal_width:3.1,petal_length:5.5,petal_width:1.8,species:"virginica"},{sepal_length:6,sepal_width:3,petal_length:4.8,petal_width:1.8,species:"virginica"},{sepal_length:6.9,sepal_width:3.1,petal_length:5.4,petal_width:2.1,species:"virginica"},{sepal_length:6.7,sepal_width:3.1,petal_length:5.6,petal_width:2.4,species:"virginica"},{sepal_length:6.9,sepal_width:3.1,petal_length:5.1,petal_width:2.3,species:"virginica"},{sepal_length:5.8,sepal_width:2.7,petal_length:5.1,petal_width:1.9,species:"virginica"},{sepal_length:6.8,sepal_width:3.2,petal_length:5.9,petal_width:2.3,species:"virginica"},{sepal_length:6.7,sepal_width:3.3,petal_length:5.7,petal_width:2.5,species:"virginica"},{sepal_length:6.7,sepal_width:3,petal_length:5.2,petal_width:2.3,species:"virginica"},{sepal_length:6.3,sepal_width:2.5,petal_length:5,petal_width:1.9,species:"virginica"},{sepal_length:6.5,sepal_width:3,petal_length:5.2,petal_width:2,species:"virginica"},{sepal_length:6.2,sepal_width:3.4,petal_length:5.4,petal_width:2.3,species:"virginica"}],A=a(88),N=function(e,t,a){var l=0;return e.forEach(function(e){var i=Object(A.a)(e,2),s=i[0],n=i[1];l+=Math.pow(n-(t*s+a),2)}),l/e.length},M=function(e,t,a,l){var i=0,s=0;return e.forEach(function(e){var l=Object(A.a)(e,2),n=l[0],p=l[1];i+=-2*n*(p-(t*n+a)),s+=-2*(p-(t*n+a))}),t-=1/e.length*i*l,a-=1/e.length*s*l,{k:t,b:a}},z=function(e){for(var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,n=arguments.length>5?arguments[5]:void 0,p=0,r=a,h=l,c=[],o=[],d=i;d<s;d++)r=(t=M(e,r,h,n)).k,h=t.b,p=N(e,r,h),c.push(p),0!==d&&d%100!==0||o.push("Epoch: ".concat(d,", k: ").concat(r.toFixed(3),", b: ").concat(h.toFixed(3),", error: ").concat(p.toFixed(3)));return{k:r,b:h,errorData:c,logs:o}},F=function(e,t,a){var l=function(e){return e.reduce(function(e,t){return t[0]<e?t[0]:e},e[0][0])}(e),i=function(e){return e.reduce(function(e,t){return t[0]>e?t[0]:e},e[0][0])}(e);return[[l,t*l+a],[i,t*i+a]]},R=[{key:"setosa",value:"setosa",text:"Iris: Setosa sepals"},{key:"versicolor",value:"versicolor",text:"Iris: Versicolor sepals"},{key:"virginica",value:"virginica",text:"Iris: Virginica sepals"},{key:"empty",value:"two_points",text:"Two points"}],G=1e-4,V=100,W=10,B=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(h.a)(this,Object(c.a)(t).call(this))).loadDataset=function(){return e.setState({data:T(e.state.dataset),regressionData:[],logs:[],errorData:[],k:0,b:0,epoch:0})},e.updateData=function(t){e.state.training||e.setState({data:t})},e.clearData=function(){return e.setState({regressionData:[],logs:[],errorData:[],k:0,b:0,epoch:0})},e.startTraining=function(){e.setState({training:!0}),e.interval=setInterval(function(){var t=e.state,a=t.data,l=t.k,i=t.b,s=t.errorData,n=t.logs,p=t.epoch,r=p+W,h=z(a,l,i,p,r,G);e.setState({regressionData:F(a,h.k,h.b),logs:h.logs.length>0?n.concat(h.logs):n,errorData:h.errorData.length>0?s.concat(h.errorData):s,k:h.k,b:h.b,epoch:r})},V)},e.stopTraining=function(){e.setState({training:!1}),clearInterval(e.interval)},e.chart=null,e.state={data:T("setosa"),dataset:"setosa",regressionData:[],errorData:[],logs:[],training:!1,epoch:0,k:0,b:0},e}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,l=t.regressionData,s=t.errorData,n=t.logs,p=t.training;return i.a.createElement(w.a,{style:{padding:"5em 0em"}},i.a.createElement(S,{datasets:R,dataset:this.state.dataset,onDatasetChange:function(t,a){var l=a.value;return e.setState({dataset:l})},loadDataset:this.loadDataset,stopTraining:this.stopTraining,startTraining:this.startTraining,clearData:this.clearData,training:p,epoch:this.state.epoch}),i.a.createElement(m.a,{columns:2},i.a.createElement(m.a.Row,null,i.a.createElement(m.a.Column,{width:16},i.a.createElement(k,{data:a,updateData:this.updateData,regressionData:l,epoch:this.state.epoch,k:this.state.k,b:this.state.b,lr:G,training:p}))),i.a.createElement(m.a.Row,null,n.length>0&&i.a.createElement(m.a.Column,null,i.a.createElement(v.a.Group,null,i.a.createElement(v.a,null,i.a.createElement("b",null,"Gradient descent logs")),i.a.createElement(v.a,{style:{height:250,overflowY:"scroll"}},n.map(function(e,t){return i.a.createElement("div",{key:t},e)})))),s.length>0&&i.a.createElement(m.a.Column,null,i.a.createElement(C,{title:"Error",trainData:s,yTitle:"error",xTitle:"epoch",updateStep:100})))))}}]),t}(i.a.Component),H=a(262),U=a(30),J=a.n(U),q=a(51),Y=a(519),$=a(18),K=28,Q=28,X=K*Q,Z=55e3,ee=65e3-Z,te=function(){function e(){Object(p.a)(this,e),this.shuffledTrainIndex=0,this.shuffledTestIndex=0}return Object(r.a)(e,[{key:"load",value:function(){var e=Object(q.a)(J.a.mark(function e(){var t,a,l,i,s,n,p,r,h=this;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Image,a=document.createElement("canvas"),l=a.getContext("2d"),i=new Promise(function(e,i){t.crossOrigin="",t.onload=function(){t.width=t.naturalWidth,t.height=t.naturalHeight;var i=new ArrayBuffer(65e3*X*4);a.width=t.width,a.height=5e3;for(var s=0;s<13;s++){var n=new Float32Array(i,s*X*5e3*4,5e3*X);l.drawImage(t,0,5e3*s,t.width,5e3,0,0,t.width,5e3);for(var p=l.getImageData(0,0,a.width,a.height),r=0;r<p.data.length/4;r++)n[r]=p.data[4*r]/255}h.datasetImages=new Float32Array(i),e()},t.src="https://storage.googleapis.com/learnjs-data/model-builder/mnist_images.png"}),s=fetch("https://storage.googleapis.com/learnjs-data/model-builder/mnist_labels_uint8"),e.next=7,Promise.all([i,s]);case 7:return n=e.sent,p=Object(A.a)(n,2),p[0],r=p[1],e.t0=Uint8Array,e.next=14,r.arrayBuffer();case 14:e.t1=e.sent,this.datasetLabels=new e.t0(e.t1),this.trainIndices=$.k.createShuffledIndices(Z),this.testIndices=$.k.createShuffledIndices(ee),this.trainImages=this.datasetImages.slice(0,X*Z),this.testImages=this.datasetImages.slice(X*Z),this.trainLabels=this.datasetLabels.slice(0,10*Z),this.testLabels=this.datasetLabels.slice(10*Z);case 22:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getTrainData",value:function(){return{xs:$.h(this.trainImages,[this.trainImages.length/X,K,Q,1]),labels:$.g(this.trainLabels,[this.trainLabels.length/10,10])}}},{key:"getTestData",value:function(e){var t=$.h(this.testImages,[this.testImages.length/X,K,Q,1]),a=$.g(this.testLabels,[this.testLabels.length/10,10]);return null!=e&&(t=t.slice([0,0,0,0],[e,K,Q,1]),a=a.slice([0,0],[e,10])),{xs:t,labels:a}}}]),e}();function ae(){var e=$.f();e.add($.c.flatten({inputShape:[K,Q,1]})),e.add($.c.dense({units:42,activation:"relu"})),e.add($.c.dense({units:10,activation:"softmax"}));var t=$.j.adam();return e.compile({optimizer:t,loss:"categoricalCrossentropy",metrics:["accuracy"]}),e}var le=a(263),ie=[{key:"mnist",value:"mnist",text:"MNIST"}],se=function(e){return i.a.createElement(O.a,null,i.a.createElement(O.a.Group,{inline:!0},i.a.createElement(O.a.Field,null,i.a.createElement("label",null,"Dataset:"),i.a.createElement(j.a,{as:"div",labelPosition:"left"},i.a.createElement(I.a,{placeholder:"Dataset",options:ie,selection:!0,className:"label",value:"mnist",onChange:null}),i.a.createElement(j.a,{content:e.datasetLoaded?"Loaded":"Load",onClick:e.loadDataset,loading:e.datasetLoading,disabled:e.datasetLoading||e.datasetLoaded}))),e.datasetLoaded&&i.a.createElement(j.a,{content:"Train",icon:"play",labelPosition:"right",onClick:e.train,disabled:e.training}),e.status&&i.a.createElement(y.a,{size:"medium",style:{alignSelf:"flex-end",marginBottom:2}},e.status)))},ne=a(521),pe=a(75),re=a(261),he=a(259),ce=a.n(he),oe=function(e){function t(){var e,a;Object(p.a)(this,t);for(var l=arguments.length,i=new Array(l),s=0;s<l;s++)i[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={activeIndex:0},a.onAccordionClick=function(e,t){var l=t.index,i=a.state.activeIndex;a.setState({activeIndex:i===l?-1:l})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.state.activeIndex;return i.a.createElement("div",{style:{paddingBottom:20}},i.a.createElement(ne.a,{fluid:!0,styled:!0},i.a.createElement(ne.a.Title,{active:0===e,index:0,onClick:this.onAccordionClick},i.a.createElement(pe.a,{name:"dropdown"}),"Info"),i.a.createElement(ne.a.Content,{active:0===e},i.a.createElement("p",null,"In this page we will train a simple neural network to recognize handwritten digits from the MNIST dataset.")),i.a.createElement(ne.a.Title,{active:1===e,index:1,onClick:this.onAccordionClick},i.a.createElement(pe.a,{name:"dropdown"}),"What is MNIST?"),i.a.createElement(ne.a.Content,{active:1===e,style:{height:100}},i.a.createElement(re.a,{src:ce.a,size:"tiny",floated:"left",wrapped:!0}),i.a.createElement("p",null,"MNIST is dataset for handwritten digits. It contains 70,000 28x28 black and white images representing the digits zero through nine.",i.a.createElement("br",null),"The data is split into two subsets, with 60,000 images belonging to the training set and 10,000 images belonging to the testing set.",i.a.createElement("br",null),"More info ",i.a.createElement("a",{href:"http://yann.lecun.com/exdb/mnist/",target:"_blank",rel:"noopener noreferrer"},"here"),"."))))}}]),t}(l.Component),de=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(h.a)(this,Object(c.a)(t).call(this))).loadDataset=Object(q.a)(J.a.mark(function t(){return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({datasetLoading:!0}),e.data=new te,t.next=4,e.data.load();case 4:e.setState({datasetLoaded:!0,datasetLoading:!1});case 5:case"end":return t.stop()}},t)})),e.train=Object(q.a)(J.a.mark(function t(){var a,l,i,s,n,p;return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({training:!0,status:"Training model..."}),e.model=ae(),550,.15,3,a=e.data.getTrainData(),l=e.data.getTestData(),i=3*Math.ceil(.85*Z/550),s=0,t.next=11,e.model.fit(a.xs,a.labels,{batchSize:550,validationSplit:.15,epochs:3,callbacks:{onBatchEnd:function(){var t=Object(q.a)(J.a.mark(function t(a,l){return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s++,e.setState({status:"Training... ("+"".concat((s/i*100).toFixed(1),"%")+" complete). To stop training, refresh or close page.",errorData:e.state.errorData.concat(l.loss),accData:e.state.accData.concat(l.acc)}),t.next=4,$.d();case 4:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),onEpochEnd:function(){var t=Object(q.a)(J.a.mark(function t(a,l){return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({errorValData:e.state.errorValData.concat([[s,l.val_loss]]),accValData:e.state.accValData.concat([[s,l.val_acc]])}),t.next=3,$.d();case 3:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()}});case 11:n=e.model.evaluate(l.xs,l.labels),p=100*n[1].dataSync()[0],e.setState({trained:!0,status:"Final test accuracy: ".concat(p.toFixed(1),"%")});case 14:case"end":return t.stop()}},t)})),e.getImageData=function(){var t=e.predCanvas.current.getContext("2d");t.clearRect(0,0,Q,K),t.drawImage(e.drawCanvas.canvas.drawing,0,0,Q,K);var a=t.getImageData(0,0,Q,K),l=$.a.fromPixels(a,1);return l=l.reshape([1,28,28,1]),(l=$.b(l,"float32")).div($.e(255))},e.predict=Object(q.a)(J.a.mark(function t(){return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.i(function(){var t=e.getImageData(),a=e.model.predict(t).dataSync(),l=Array.from(a),i=l.indexOf(Math.max.apply(Math,Object(H.a)(l))),s=100*l[i];console.log(l),console.log(i),console.log(s),e.setState({prediction:i,predictionScore:s.toFixed(1)})});case 2:case"end":return t.stop()}},t)})),e.clear=function(){e.drawCanvas.clear(),e.predCanvas.current.getContext("2d").clearRect(0,0,Q,K),e.setState({prediction:null,predictionScore:null})},e.state={datasetLoaded:!1,datasetLoading:!1,training:!1,trained:!1,status:null,errorData:[],errorValData:[],accData:[],accValData:[],prediction:null,predictionScore:null},e.predCanvas=i.a.createRef(),e}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.errorData,l=t.accData,s=t.prediction;return i.a.createElement(w.a,{style:{padding:"5em 0em"}},i.a.createElement(oe,null),i.a.createElement(se,{datasetLoaded:this.state.datasetLoaded,datasetLoading:this.state.datasetLoading,loadDataset:this.loadDataset,train:this.train,training:this.state.training,status:this.state.status}),i.a.createElement(m.a,{columns:2},i.a.createElement(m.a.Row,null,a.length>0&&i.a.createElement(m.a.Column,null,i.a.createElement(C,{title:"Error",trainData:a,valData:this.state.errorValData,yTitle:"error"})),l.length>0&&i.a.createElement(m.a.Column,null,i.a.createElement(C,{title:"Accuracy",trainData:l,valData:this.state.accValData,yTitle:"accuracy"}))),this.state.trained&&i.a.createElement(m.a.Row,null,i.a.createElement(m.a.Column,null,i.a.createElement(v.a.Group,null,i.a.createElement(v.a,null,i.a.createElement("b",null,"Draw"),i.a.createElement("span",{style:{display:"inline",float:"right",verticalAlign:"top"}},i.a.createElement(j.a,{compact:!0,content:"Clear",onClick:this.clear,size:"mini"}),i.a.createElement(j.a,{compact:!0,positive:!0,content:"Predict",onClick:this.predict,size:"mini"}))),i.a.createElement(v.a,{style:{padding:0}},i.a.createElement(le.a,{ref:function(t){return e.drawCanvas=t},lazyRadius:0,brushRadius:40,canvasWidth:"100%",canvasHeight:540})))),i.a.createElement(m.a.Column,null,i.a.createElement(v.a.Group,null,i.a.createElement(v.a,null,i.a.createElement("b",null,"Prediction")),i.a.createElement(v.a,{style:{height:540}},i.a.createElement(Y.a.Group,null,i.a.createElement(Y.a,null,i.a.createElement(Y.a.Content,{verticalAlign:"top"},i.a.createElement(Y.a.Header,{className:"item-header"},null!==s?"Neural network input (28 x 28 pixels):":"Draw any number and press 'Predict'."),i.a.createElement("canvas",{ref:this.predCanvas,width:28,height:28}))),null!==s&&i.a.createElement(Y.a,null,i.a.createElement(Y.a.Content,{verticalAlign:"middle"},i.a.createElement(Y.a.Header,{className:"item-header"},"Prediction: ",s))),null!==s&&i.a.createElement(Y.a,null,i.a.createElement(Y.a.Content,{verticalAlign:"middle"},i.a.createElement(Y.a.Header,{className:"item-header"},"Prediction accuracy: ",this.state.predictionScore,"%"))))))))))}}]),t}(i.a.Component),_e=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement(d.a,{basename:"/mlviz"},i.a.createElement("div",null,i.a.createElement(u,null),i.a.createElement(_.a,{path:"/",exact:!0,component:B}),i.a.createElement(_.a,{path:"/gradient_descent",component:B}),i.a.createElement(_.a,{path:"/mnist",component:de})))}}]),t}(l.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(i.a.createElement(_e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[275,1,2]]]);
//# sourceMappingURL=main.0bdfdb95.chunk.js.map