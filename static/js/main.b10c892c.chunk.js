(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{261:function(e,t,a){e.exports=a.p+"static/media/dataset.649191b6.png"},277:function(e,t,a){e.exports=a(512)},282:function(e,t,a){},425:function(e,t){},427:function(e,t){},459:function(e,t){},460:function(e,t){},506:function(e,t){},507:function(e,t){},508:function(e,t){},512:function(e,t,a){"use strict";a.r(t);var l=a(1),n=a.n(l),i=a(72),s=a.n(i),r=(a(282),a(26)),p=a(27),c=a(31),h=a(30),o=a(32),d=a(60),_=a(57),g=a(525),u=a(519),w=function(){return n.a.createElement(g.a,{fixed:"top",inverted:!0},n.a.createElement(u.a,null,n.a.createElement(g.a.Item,{header:!0},n.a.createElement(d.b,{to:"/"},"mlviz")),n.a.createElement(g.a.Item,null,n.a.createElement(d.b,{to:"/gradient_descent"},"Gradient Descent")),n.a.createElement(g.a.Item,null,n.a.createElement(d.b,{to:"/mnist"},"MNIST")),n.a.createElement(g.a.Item,null,n.a.createElement(d.b,{to:"/object_detection"},"Object Detection"))))},m=a(523),v=a(76),f=a(527),b=a(526),E=a(88),x=a.n(E),y=a(242),D=a.n(y),k=a(115),C=a(243);D()(x.a);var O=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).addPoint=function(t){var a=[t.xAxis[0].value,t.yAxis[0].value],l=e.props.data.concat([a]);e.props.updateData(l)},e.removePoint=function(t){if("data"===t.point.series.userOptions.id&&!(e.props.data.length<=2)){var a=[t.point.x,t.point.y],l=e.props.data.filter(function(e){return!Object(C.isEqual)(e,a)});e.props.updateData(l)}},e.chart=null,e.id="linearRegression",e}return Object(o.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&this.chart.series[0].update({data:this.props.data}),e.regressionData!==this.props.regressionData&&this.chart.series[1].update({data:this.props.regressionData})}},{key:"componentDidMount",value:function(){var e={chart:{type:"scatter",zoomType:"xy",events:{click:this.addPoint}},credits:{enabled:!1},title:{text:""},subtitle:{text:"Click the plot area to add a point. Click a point to remove it."},xAxis:{enabled:!0,title:{text:"x"},gridLineWidth:1,minPadding:.5,maxPadding:.5},yAxis:{title:{text:"y"},minPadding:.5,maxPadding:.5},exporting:{enabled:!0},plotOptions:{series:{point:{events:{click:this.removePoint}}}},series:[{id:"data",name:"Data",data:this.props.data},{type:"line",id:"regression",name:"Regression Line",data:this.props.regressionData,marker:{enabled:!1},states:{hover:{lineWidth:0}},enableMouseTracking:!1}]};this.chart=new x.a.chart(this.id,e)}},{key:"componentWillUnmount",value:function(){this.chart.destroy()}},{key:"render",value:function(){return n.a.createElement(b.a.Group,null,n.a.createElement(b.a,null,n.a.createElement("b",null,"Regression data"),this.props.epoch>0&&n.a.createElement(k.a.Group,{size:"medium",style:{display:"inline"}},n.a.createElement(k.a,{className:"first-label"},"epoch: ",this.props.epoch),n.a.createElement(k.a,{className:"labels"},"k: ",this.props.k.toFixed(3)),n.a.createElement(k.a,{className:"labels"},"b: ",this.props.b.toFixed(3)),n.a.createElement(k.a,{className:"labels"},"learning rate: ",this.props.lr))),n.a.createElement(b.a,{style:{padding:0}},n.a.createElement("div",{id:this.id})))}}]),t}(n.a.Component),j=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).chart=null,a.id="chart"+Math.random(),a.updateStep=e.updateStep||10,a}return Object(o.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.trainData,l=t.valData;e.trainData!==a&&a.length%this.updateStep===0&&this.chart.series[0].update({data:a}),e.valData!==l&&this.chart.series[1].update({data:l})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.trainData,a=e.valData,l=e.yTitle,n={chart:{type:"line",height:250},credits:{enabled:!1},title:{text:""},xAxis:{enabled:!0,title:{text:e.xTitle||"batch"}},yAxis:{title:{text:l},minPadding:0,maxPadding:0},legend:{enabled:!!a},exporting:{enabled:!1},plotOptions:{series:{lineWidth:1,marker:{enabled:!1}}},series:[{id:"train",name:"Train",data:t},!!a&&{id:"val",name:"Validation",data:a}].filter(Boolean)};this.chart=new x.a.chart(this.id,n)}},{key:"componentWillUnmount",value:function(){this.chart.destroy()}},{key:"render",value:function(){return n.a.createElement(b.a.Group,null,n.a.createElement(b.a,null,n.a.createElement("b",null,this.props.title)),n.a.createElement(b.a,{style:{padding:0}},n.a.createElement("div",{id:this.id})))}}]),t}(n.a.Component),S=a(520),I=a(524),T=a(522),L=function(e){return n.a.createElement(S.a,null,n.a.createElement(S.a.Group,{inline:!0},n.a.createElement(S.a.Field,null,n.a.createElement("label",null,"Dataset:"),n.a.createElement(I.a,{as:"div",labelPosition:"left"},n.a.createElement(T.a,{placeholder:"Dataset",options:e.datasets,selection:!0,className:"label",value:e.dataset,onChange:e.onDatasetChange}),n.a.createElement(I.a,{content:"Load",onClick:e.loadDataset,disabled:e.training}))),e.training?n.a.createElement(I.a,{content:"Stop",icon:"stop",labelPosition:"right",onClick:e.stopTraining}):n.a.createElement(I.a,{content:"Train",icon:"play",labelPosition:"right",onClick:e.startTraining}),!e.training&&e.epoch>0&&n.a.createElement(I.a,{content:"Clear",icon:"redo",labelPosition:"right",onClick:e.clearData})))},P=function(e){switch(e){case"two_points":return A;default:return F.filter(function(t){return t.species===e}).map(function(e){return[e.sepal_length,e.sepal_width]})}},A=[[10,10],[90,90]],F=[{sepal_length:5.1,sepal_width:3.5,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:4.9,sepal_width:3,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:4.7,sepal_width:3.2,petal_length:1.3,petal_width:.2,species:"setosa"},{sepal_length:4.6,sepal_width:3.1,petal_length:1.5,petal_width:.2,species:"setosa"},{sepal_length:5,sepal_width:3.6,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:4.6,sepal_width:3.4,petal_length:1.4,petal_width:.3,species:"setosa"},{sepal_length:5,sepal_width:3.4,petal_length:1.5,petal_width:.2,species:"setosa"},{sepal_length:4.4,sepal_width:2.9,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:4.9,sepal_width:3.1,petal_length:1.5,petal_width:.1,species:"setosa"},{sepal_length:5.4,sepal_width:3.7,petal_length:1.5,petal_width:.2,species:"setosa"},{sepal_length:4.8,sepal_width:3.4,petal_length:1.6,petal_width:.2,species:"setosa"},{sepal_length:4.8,sepal_width:3,petal_length:1.4,petal_width:.1,species:"setosa"},{sepal_length:4.3,sepal_width:3,petal_length:1.1,petal_width:.1,species:"setosa"},{sepal_length:5.8,sepal_width:4,petal_length:1.2,petal_width:.2,species:"setosa"},{sepal_length:5.7,sepal_width:4.4,petal_length:1.5,petal_width:.4,species:"setosa"},{sepal_length:5.4,sepal_width:3.9,petal_length:1.3,petal_width:.4,species:"setosa"},{sepal_length:5.1,sepal_width:3.5,petal_length:1.4,petal_width:.3,species:"setosa"},{sepal_length:5.7,sepal_width:3.8,petal_length:1.7,petal_width:.3,species:"setosa"},{sepal_length:5.1,sepal_width:3.8,petal_length:1.5,petal_width:.3,species:"setosa"},{sepal_length:5.4,sepal_width:3.4,petal_length:1.7,petal_width:.2,species:"setosa"},{sepal_length:5.1,sepal_width:3.7,petal_length:1.5,petal_width:.4,species:"setosa"},{sepal_length:4.6,sepal_width:3.6,petal_length:1,petal_width:.2,species:"setosa"},{sepal_length:5.1,sepal_width:3.3,petal_length:1.7,petal_width:.5,species:"setosa"},{sepal_length:4.8,sepal_width:3.4,petal_length:1.9,petal_width:.2,species:"setosa"},{sepal_length:5,sepal_width:3,petal_length:1.6,petal_width:.2,species:"setosa"},{sepal_length:5,sepal_width:3.4,petal_length:1.6,petal_width:.4,species:"setosa"},{sepal_length:5.2,sepal_width:3.5,petal_length:1.5,petal_width:.2,species:"setosa"},{sepal_length:5.2,sepal_width:3.4,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:4.7,sepal_width:3.2,petal_length:1.6,petal_width:.2,species:"setosa"},{sepal_length:4.8,sepal_width:3.1,petal_length:1.6,petal_width:.2,species:"setosa"},{sepal_length:5.4,sepal_width:3.4,petal_length:1.5,petal_width:.4,species:"setosa"},{sepal_length:5.2,sepal_width:4.1,petal_length:1.5,petal_width:.1,species:"setosa"},{sepal_length:5.5,sepal_width:4.2,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:4.9,sepal_width:3.1,petal_length:1.5,petal_width:.1,species:"setosa"},{sepal_length:5,sepal_width:3.2,petal_length:1.2,petal_width:.2,species:"setosa"},{sepal_length:5.5,sepal_width:3.5,petal_length:1.3,petal_width:.2,species:"setosa"},{sepal_length:4.9,sepal_width:3.1,petal_length:1.5,petal_width:.1,species:"setosa"},{sepal_length:4.4,sepal_width:3,petal_length:1.3,petal_width:.2,species:"setosa"},{sepal_length:5.1,sepal_width:3.4,petal_length:1.5,petal_width:.2,species:"setosa"},{sepal_length:5,sepal_width:3.5,petal_length:1.3,petal_width:.3,species:"setosa"},{sepal_length:4.5,sepal_width:2.3,petal_length:1.3,petal_width:.3,species:"setosa"},{sepal_length:4.4,sepal_width:3.2,petal_length:1.3,petal_width:.2,species:"setosa"},{sepal_length:5,sepal_width:3.5,petal_length:1.6,petal_width:.6,species:"setosa"},{sepal_length:5.1,sepal_width:3.8,petal_length:1.9,petal_width:.4,species:"setosa"},{sepal_length:4.8,sepal_width:3,petal_length:1.4,petal_width:.3,species:"setosa"},{sepal_length:5.1,sepal_width:3.8,petal_length:1.6,petal_width:.2,species:"setosa"},{sepal_length:4.6,sepal_width:3.2,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:5.3,sepal_width:3.7,petal_length:1.5,petal_width:.2,species:"setosa"},{sepal_length:5,sepal_width:3.3,petal_length:1.4,petal_width:.2,species:"setosa"},{sepal_length:7,sepal_width:3.2,petal_length:4.7,petal_width:1.4,species:"versicolor"},{sepal_length:6.4,sepal_width:3.2,petal_length:4.5,petal_width:1.5,species:"versicolor"},{sepal_length:6.9,sepal_width:3.1,petal_length:4.9,petal_width:1.5,species:"versicolor"},{sepal_length:5.5,sepal_width:2.3,petal_length:4,petal_width:1.3,species:"versicolor"},{sepal_length:6.5,sepal_width:2.8,petal_length:4.6,petal_width:1.5,species:"versicolor"},{sepal_length:5.7,sepal_width:2.8,petal_length:4.5,petal_width:1.3,species:"versicolor"},{sepal_length:6.3,sepal_width:3.3,petal_length:4.7,petal_width:1.6,species:"versicolor"},{sepal_length:4.9,sepal_width:2.4,petal_length:3.3,petal_width:1,species:"versicolor"},{sepal_length:6.6,sepal_width:2.9,petal_length:4.6,petal_width:1.3,species:"versicolor"},{sepal_length:5.2,sepal_width:2.7,petal_length:3.9,petal_width:1.4,species:"versicolor"},{sepal_length:5,sepal_width:2,petal_length:3.5,petal_width:1,species:"versicolor"},{sepal_length:5.9,sepal_width:3,petal_length:4.2,petal_width:1.5,species:"versicolor"},{sepal_length:6,sepal_width:2.2,petal_length:4,petal_width:1,species:"versicolor"},{sepal_length:6.1,sepal_width:2.9,petal_length:4.7,petal_width:1.4,species:"versicolor"},{sepal_length:5.6,sepal_width:2.9,petal_length:3.6,petal_width:1.3,species:"versicolor"},{sepal_length:6.7,sepal_width:3.1,petal_length:4.4,petal_width:1.4,species:"versicolor"},{sepal_length:5.6,sepal_width:3,petal_length:4.5,petal_width:1.5,species:"versicolor"},{sepal_length:5.8,sepal_width:2.7,petal_length:4.1,petal_width:1,species:"versicolor"},{sepal_length:6.2,sepal_width:2.2,petal_length:4.5,petal_width:1.5,species:"versicolor"},{sepal_length:5.6,sepal_width:2.5,petal_length:3.9,petal_width:1.1,species:"versicolor"},{sepal_length:5.9,sepal_width:3.2,petal_length:4.8,petal_width:1.8,species:"versicolor"},{sepal_length:6.1,sepal_width:2.8,petal_length:4,petal_width:1.3,species:"versicolor"},{sepal_length:6.3,sepal_width:2.5,petal_length:4.9,petal_width:1.5,species:"versicolor"},{sepal_length:6.1,sepal_width:2.8,petal_length:4.7,petal_width:1.2,species:"versicolor"},{sepal_length:6.4,sepal_width:2.9,petal_length:4.3,petal_width:1.3,species:"versicolor"},{sepal_length:6.6,sepal_width:3,petal_length:4.4,petal_width:1.4,species:"versicolor"},{sepal_length:6.8,sepal_width:2.8,petal_length:4.8,petal_width:1.4,species:"versicolor"},{sepal_length:6.7,sepal_width:3,petal_length:5,petal_width:1.7,species:"versicolor"},{sepal_length:6,sepal_width:2.9,petal_length:4.5,petal_width:1.5,species:"versicolor"},{sepal_length:5.7,sepal_width:2.6,petal_length:3.5,petal_width:1,species:"versicolor"},{sepal_length:5.5,sepal_width:2.4,petal_length:3.8,petal_width:1.1,species:"versicolor"},{sepal_length:5.5,sepal_width:2.4,petal_length:3.7,petal_width:1,species:"versicolor"},{sepal_length:5.8,sepal_width:2.7,petal_length:3.9,petal_width:1.2,species:"versicolor"},{sepal_length:6,sepal_width:2.7,petal_length:5.1,petal_width:1.6,species:"versicolor"},{sepal_length:5.4,sepal_width:3,petal_length:4.5,petal_width:1.5,species:"versicolor"},{sepal_length:6,sepal_width:3.4,petal_length:4.5,petal_width:1.6,species:"versicolor"},{sepal_length:6.7,sepal_width:3.1,petal_length:4.7,petal_width:1.5,species:"versicolor"},{sepal_length:6.3,sepal_width:2.3,petal_length:4.4,petal_width:1.3,species:"versicolor"},{sepal_length:5.6,sepal_width:3,petal_length:4.1,petal_width:1.3,species:"versicolor"},{sepal_length:5.5,sepal_width:2.5,petal_length:4,petal_width:1.3,species:"versicolor"},{sepal_length:5.5,sepal_width:2.6,petal_length:4.4,petal_width:1.2,species:"versicolor"},{sepal_length:6.1,sepal_width:3,petal_length:4.6,petal_width:1.4,species:"versicolor"},{sepal_length:5.8,sepal_width:2.6,petal_length:4,petal_width:1.2,species:"versicolor"},{sepal_length:5,sepal_width:2.3,petal_length:3.3,petal_width:1,species:"versicolor"},{sepal_length:5.6,sepal_width:2.7,petal_length:4.2,petal_width:1.3,species:"versicolor"},{sepal_length:5.7,sepal_width:3,petal_length:4.2,petal_width:1.2,species:"versicolor"},{sepal_length:6.2,sepal_width:2.9,petal_length:4.3,petal_width:1.3,species:"versicolor"},{sepal_length:5.1,sepal_width:2.5,petal_length:3,petal_width:1.1,species:"versicolor"},{sepal_length:5.7,sepal_width:2.8,petal_length:4.1,petal_width:1.3,species:"versicolor"},{sepal_length:6.3,sepal_width:3.3,petal_length:6,petal_width:2.5,species:"virginica"},{sepal_length:5.8,sepal_width:2.7,petal_length:5.1,petal_width:1.9,species:"virginica"},{sepal_length:7.1,sepal_width:3,petal_length:5.9,petal_width:2.1,species:"virginica"},{sepal_length:6.3,sepal_width:2.9,petal_length:5.6,petal_width:1.8,species:"virginica"},{sepal_length:6.5,sepal_width:3,petal_length:5.8,petal_width:2.2,species:"virginica"},{sepal_length:7.6,sepal_width:3,petal_length:6.6,petal_width:2.1,species:"virginica"},{sepal_length:4.9,sepal_width:2.5,petal_length:4.5,petal_width:1.7,species:"virginica"},{sepal_length:7.3,sepal_width:2.9,petal_length:6.3,petal_width:1.8,species:"virginica"},{sepal_length:6.7,sepal_width:2.5,petal_length:5.8,petal_width:1.8,species:"virginica"},{sepal_length:7.2,sepal_width:3.6,petal_length:6.1,petal_width:2.5,species:"virginica"},{sepal_length:6.5,sepal_width:3.2,petal_length:5.1,petal_width:2,species:"virginica"},{sepal_length:6.4,sepal_width:2.7,petal_length:5.3,petal_width:1.9,species:"virginica"},{sepal_length:6.8,sepal_width:3,petal_length:5.5,petal_width:2.1,species:"virginica"},{sepal_length:5.7,sepal_width:2.5,petal_length:5,petal_width:2,species:"virginica"},{sepal_length:5.8,sepal_width:2.8,petal_length:5.1,petal_width:2.4,species:"virginica"},{sepal_length:6.4,sepal_width:3.2,petal_length:5.3,petal_width:2.3,species:"virginica"},{sepal_length:6.5,sepal_width:3,petal_length:5.5,petal_width:1.8,species:"virginica"},{sepal_length:7.7,sepal_width:3.8,petal_length:6.7,petal_width:2.2,species:"virginica"},{sepal_length:7.7,sepal_width:2.6,petal_length:6.9,petal_width:2.3,species:"virginica"},{sepal_length:6,sepal_width:2.2,petal_length:5,petal_width:1.5,species:"virginica"},{sepal_length:6.9,sepal_width:3.2,petal_length:5.7,petal_width:2.3,species:"virginica"},{sepal_length:5.6,sepal_width:2.8,petal_length:4.9,petal_width:2,species:"virginica"},{sepal_length:7.7,sepal_width:2.8,petal_length:6.7,petal_width:2,species:"virginica"},{sepal_length:6.3,sepal_width:2.7,petal_length:4.9,petal_width:1.8,species:"virginica"},{sepal_length:6.7,sepal_width:3.3,petal_length:5.7,petal_width:2.1,species:"virginica"},{sepal_length:7.2,sepal_width:3.2,petal_length:6,petal_width:1.8,species:"virginica"},{sepal_length:6.2,sepal_width:2.8,petal_length:4.8,petal_width:1.8,species:"virginica"},{sepal_length:6.1,sepal_width:3,petal_length:4.9,petal_width:1.8,species:"virginica"},{sepal_length:6.4,sepal_width:2.8,petal_length:5.6,petal_width:2.1,species:"virginica"},{sepal_length:7.2,sepal_width:3,petal_length:5.8,petal_width:1.6,species:"virginica"},{sepal_length:7.4,sepal_width:2.8,petal_length:6.1,petal_width:1.9,species:"virginica"},{sepal_length:7.9,sepal_width:3.8,petal_length:6.4,petal_width:2,species:"virginica"},{sepal_length:6.4,sepal_width:2.8,petal_length:5.6,petal_width:2.2,species:"virginica"},{sepal_length:6.3,sepal_width:2.8,petal_length:5.1,petal_width:1.5,species:"virginica"},{sepal_length:6.1,sepal_width:2.6,petal_length:5.6,petal_width:1.4,species:"virginica"},{sepal_length:7.7,sepal_width:3,petal_length:6.1,petal_width:2.3,species:"virginica"},{sepal_length:6.3,sepal_width:3.4,petal_length:5.6,petal_width:2.4,species:"virginica"},{sepal_length:6.4,sepal_width:3.1,petal_length:5.5,petal_width:1.8,species:"virginica"},{sepal_length:6,sepal_width:3,petal_length:4.8,petal_width:1.8,species:"virginica"},{sepal_length:6.9,sepal_width:3.1,petal_length:5.4,petal_width:2.1,species:"virginica"},{sepal_length:6.7,sepal_width:3.1,petal_length:5.6,petal_width:2.4,species:"virginica"},{sepal_length:6.9,sepal_width:3.1,petal_length:5.1,petal_width:2.3,species:"virginica"},{sepal_length:5.8,sepal_width:2.7,petal_length:5.1,petal_width:1.9,species:"virginica"},{sepal_length:6.8,sepal_width:3.2,petal_length:5.9,petal_width:2.3,species:"virginica"},{sepal_length:6.7,sepal_width:3.3,petal_length:5.7,petal_width:2.5,species:"virginica"},{sepal_length:6.7,sepal_width:3,petal_length:5.2,petal_width:2.3,species:"virginica"},{sepal_length:6.3,sepal_width:2.5,petal_length:5,petal_width:1.9,species:"virginica"},{sepal_length:6.5,sepal_width:3,petal_length:5.2,petal_width:2,species:"virginica"},{sepal_length:6.2,sepal_width:3.4,petal_length:5.4,petal_width:2.3,species:"virginica"}],M=a(59),R=function(e,t,a){var l=0;return e.forEach(function(e){var n=Object(M.a)(e,2),i=n[0],s=n[1];l+=Math.pow(s-(t*i+a),2)}),l/e.length},N=function(e,t,a,l){var n=0,i=0;return e.forEach(function(e){var l=Object(M.a)(e,2),s=l[0],r=l[1];n+=-2*s*(r-(t*s+a)),i+=-2*(r-(t*s+a))}),t-=1/e.length*n*l,a-=1/e.length*i*l,{k:t,b:a}},z=function(e){for(var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,r=0,p=a,c=l,h=[],o=[],d=n;d<i;d++)p=(t=N(e,p,c,s)).k,c=t.b,r=R(e,p,c),h.push(r),0!==d&&d%100!==0||o.push("Epoch: ".concat(d,", k: ").concat(p.toFixed(3),", b: ").concat(c.toFixed(3),", error: ").concat(r.toFixed(3)));return{k:p,b:c,errorData:h,logs:o}},G=function(e,t,a){var l=function(e){return e.reduce(function(e,t){return t[0]<e?t[0]:e},e[0][0])}(e),n=function(e){return e.reduce(function(e,t){return t[0]>e?t[0]:e},e[0][0])}(e);return[[l,t*l+a],[n,t*n+a]]},B=[{key:"setosa",value:"setosa",text:"Iris: Setosa sepals"},{key:"versicolor",value:"versicolor",text:"Iris: Versicolor sepals"},{key:"virginica",value:"virginica",text:"Iris: Virginica sepals"},{key:"empty",value:"two_points",text:"Two points"}],V=1e-4,W=100,H=10,U=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).loadDataset=function(){return e.setState({data:P(e.state.dataset),regressionData:[],logs:[],errorData:[],k:0,b:0,epoch:0})},e.updateData=function(t){e.state.training||e.setState({data:t})},e.clearData=function(){return e.setState({regressionData:[],logs:[],errorData:[],k:0,b:0,epoch:0})},e.startTraining=function(){e.setState({training:!0}),e.interval=setInterval(function(){var t=e.state,a=t.data,l=t.k,n=t.b,i=t.errorData,s=t.logs,r=t.epoch,p=r+H,c=z(a,l,n,r,p,V);e.setState({regressionData:G(a,c.k,c.b),logs:c.logs.length>0?s.concat(c.logs):s,errorData:c.errorData.length>0?i.concat(c.errorData):i,k:c.k,b:c.b,epoch:p})},W)},e.stopTraining=function(){e.setState({training:!1}),clearInterval(e.interval)},e.onAccordionClick=function(t,a){var l=a.index,n=e.state.activeIndex;e.setState({activeIndex:n===l?-1:l})},e.chart=null,e.state={data:P("setosa"),dataset:"setosa",regressionData:[],errorData:[],logs:[],training:!1,epoch:0,k:0,b:0,activeIndex:0},e}return Object(o.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,l=t.regressionData,i=t.errorData,s=t.logs,r=t.training,p=t.activeIndex;return n.a.createElement(u.a,{style:{padding:"5em 0em"}},n.a.createElement("div",{style:{paddingBottom:20}},n.a.createElement(m.a,{fluid:!0,styled:!0},n.a.createElement(m.a.Title,{active:0===p,index:0,onClick:this.onAccordionClick},n.a.createElement(v.a,{name:"dropdown"}),"Gradient Descent"),n.a.createElement(m.a.Content,{active:0===p},n.a.createElement("p",null,"This example shows how gradient descent algorithm can be used to solve a linear regression problem. It works by iteratively estimating and tuning k and b parameters of regression line (when y = kx + b) and trying minimize the cost function (MSE).")))),n.a.createElement(L,{datasets:B,dataset:this.state.dataset,onDatasetChange:function(t,a){var l=a.value;return e.setState({dataset:l})},loadDataset:this.loadDataset,stopTraining:this.stopTraining,startTraining:this.startTraining,clearData:this.clearData,training:r,epoch:this.state.epoch}),n.a.createElement(f.a,{columns:2},n.a.createElement(f.a.Row,null,n.a.createElement(f.a.Column,{width:16},n.a.createElement(O,{data:a,updateData:this.updateData,regressionData:l,epoch:this.state.epoch,k:this.state.k,b:this.state.b,lr:V,training:r}))),n.a.createElement(f.a.Row,null,s.length>0&&n.a.createElement(f.a.Column,null,n.a.createElement(b.a.Group,null,n.a.createElement(b.a,null,n.a.createElement("b",null,"Gradient descent logs")),n.a.createElement(b.a,{style:{height:250,overflowY:"scroll"}},s.map(function(e,t){return n.a.createElement("div",{key:t},e)})))),i.length>0&&n.a.createElement(f.a.Column,null,n.a.createElement(j,{title:"Error",trainData:i,yTitle:"error",xTitle:"epoch",updateStep:100})))))}}]),t}(n.a.Component),q=a(24),J=a.n(q),Y=a(44),$=a(256),K=a.n($),Q=a(257),X=[{key:"coco",value:"coco",text:"COCO-SSD"}],Z=function(e){return n.a.createElement(S.a,null,n.a.createElement(S.a.Group,{inline:!0},n.a.createElement(S.a.Field,null,n.a.createElement("label",null,"Model:"),n.a.createElement(I.a,{as:"div",labelPosition:"left"},n.a.createElement(T.a,{placeholder:"Dataset",options:X,selection:!0,className:"label",value:"coco",onChange:null}),n.a.createElement(I.a,{content:e.loaded?"Loaded":"Load",onClick:e.loadModel,loading:e.loading,disabled:e.loading||e.loaded})))))},ee="#f44336",te="#ffffff",ae=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).loadModel=Object(Y.a)(J.a.mark(function t(){return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,Q.a();case 3:e.model=t.sent,e.setState({loaded:!0,loading:!1},function(){return e.detectFrame()});case 5:case"end":return t.stop()}},t)})),e.detectFrame=function(){e.model.detect(e.webcam.video).then(function(t){e.renderPredictions(t),requestAnimationFrame(function(){return e.detectFrame()})})},e.renderPredictions=function(t){var a=e.canvasRef.current.getContext("2d");a.clearRect(0,0,a.canvas.width,a.canvas.height),a.font="16px sans-serif",a.textBaseline="top",t.forEach(function(e){var t=Object(M.a)(e.bbox,4),l=t[0],n=t[1],i=t[2],s=t[3];a.strokeStyle=ee,a.lineWidth=4,a.strokeRect(l,n,i,s),a.fillStyle=ee;var r=a.measureText(e.class).width;a.fillRect(l,n,r+4,20),a.fillStyle=te,a.fillText(e.class,l,n)})},e.onAccordionClick=function(t,a){var l=a.index,n=e.state.activeIndex;e.setState({activeIndex:n===l?-1:l})},e.state={loaded:!1,loading:!1,activeIndex:0},e.webcam=null,e.canvasRef=n.a.createRef(),e}return Object(o.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.loaded,l=t.loading,i=t.activeIndex;return n.a.createElement(u.a,{style:{padding:"5em 0em"}},n.a.createElement("div",{style:{paddingBottom:20}},n.a.createElement(m.a,{fluid:!0,styled:!0},n.a.createElement(m.a.Title,{active:0===i,index:0,onClick:this.onAccordionClick},n.a.createElement(v.a,{name:"dropdown"}),"Object Detection"),n.a.createElement(m.a.Content,{active:0===i},n.a.createElement("p",null,"This mini project uses already pretrained TensorFlow.js COCO-SSD model. This model detects objects defined in the COCO dataset, which is a large-scale object detection, segmentation, and captioning dataset. You can find more information",n.a.createElement("a",{href:"http://cocodataset.org/#home",target:"_blank",rel:"noopener noreferrer"}," here"),". The model is capable of detecting 90 classes of objects. (SSD stands for Single Shot MultiBox Detection).")))),n.a.createElement(Z,{loaded:a,loading:l,loadModel:this.loadModel}),a&&n.a.createElement(b.a,{style:{position:"relative",height:496,width:657,padding:8},raised:!0},n.a.createElement("canvas",{ref:this.canvasRef,style:{position:"absolute"},width:"640",height:"480"}),n.a.createElement(K.a,{ref:function(t){e.webcam=t},audio:!1})))}}]),t}(n.a.Component),le=a(264),ne=a(521),ie=a(15),se=28,re=28,pe=se*re,ce=55e3,he=65e3-ce,oe=function(){function e(){Object(r.a)(this,e),this.shuffledTrainIndex=0,this.shuffledTestIndex=0}return Object(p.a)(e,[{key:"load",value:function(){var e=Object(Y.a)(J.a.mark(function e(){var t,a,l,n,i,s,r,p,c=this;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Image,a=document.createElement("canvas"),l=a.getContext("2d"),n=new Promise(function(e,n){t.crossOrigin="",t.onload=function(){t.width=t.naturalWidth,t.height=t.naturalHeight;var n=new ArrayBuffer(65e3*pe*4);a.width=t.width,a.height=5e3;for(var i=0;i<13;i++){var s=new Float32Array(n,i*pe*5e3*4,5e3*pe);l.drawImage(t,0,5e3*i,t.width,5e3,0,0,t.width,5e3);for(var r=l.getImageData(0,0,a.width,a.height),p=0;p<r.data.length/4;p++)s[p]=r.data[4*p]/255}c.datasetImages=new Float32Array(n),e()},t.src="https://storage.googleapis.com/learnjs-data/model-builder/mnist_images.png"}),i=fetch("https://storage.googleapis.com/learnjs-data/model-builder/mnist_labels_uint8"),e.next=7,Promise.all([n,i]);case 7:return s=e.sent,r=Object(M.a)(s,2),r[0],p=r[1],e.t0=Uint8Array,e.next=14,p.arrayBuffer();case 14:e.t1=e.sent,this.datasetLabels=new e.t0(e.t1),this.trainIndices=ie.util.createShuffledIndices(ce),this.testIndices=ie.util.createShuffledIndices(he),this.trainImages=this.datasetImages.slice(0,pe*ce),this.testImages=this.datasetImages.slice(pe*ce),this.trainLabels=this.datasetLabels.slice(0,10*ce),this.testLabels=this.datasetLabels.slice(10*ce);case 22:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getTrainData",value:function(){return{xs:ie.tensor4d(this.trainImages,[this.trainImages.length/pe,se,re,1]),labels:ie.tensor2d(this.trainLabels,[this.trainLabels.length/10,10])}}},{key:"getTestData",value:function(e){var t=ie.tensor4d(this.testImages,[this.testImages.length/pe,se,re,1]),a=ie.tensor2d(this.testLabels,[this.testLabels.length/10,10]);return null!=e&&(t=t.slice([0,0,0,0],[e,se,re,1]),a=a.slice([0,0],[e,10])),{xs:t,labels:a}}}]),e}();function de(){var e=ie.sequential();e.add(ie.layers.flatten({inputShape:[se,re,1]})),e.add(ie.layers.dense({units:42,activation:"relu"})),e.add(ie.layers.dense({units:10,activation:"softmax"}));var t=ie.train.adam();return e.compile({optimizer:t,loss:"categoricalCrossentropy",metrics:["accuracy"]}),e}var _e=a(265),ge=[{key:"mnist",value:"mnist",text:"MNIST"}],ue=function(e){return n.a.createElement(S.a,null,n.a.createElement(S.a.Group,{inline:!0},n.a.createElement(S.a.Field,null,n.a.createElement("label",null,"Dataset:"),n.a.createElement(I.a,{as:"div",labelPosition:"left"},n.a.createElement(T.a,{placeholder:"Dataset",options:ge,selection:!0,className:"label",value:"mnist",onChange:null}),n.a.createElement(I.a,{content:e.datasetLoaded?"Loaded":"Load",onClick:e.loadDataset,loading:e.datasetLoading,disabled:e.datasetLoading||e.datasetLoaded}))),e.datasetLoaded&&n.a.createElement(I.a,{content:"Train",icon:"play",labelPosition:"right",onClick:e.train,disabled:e.training}),e.status&&n.a.createElement(k.a,{size:"medium",style:{alignSelf:"flex-end",marginBottom:2}},e.status)))},we=a(263),me=a(261),ve=a.n(me),fe=function(e){function t(){var e,a;Object(r.a)(this,t);for(var l=arguments.length,n=new Array(l),i=0;i<l;i++)n[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state={activeIndex:0},a.onAccordionClick=function(e,t){var l=t.index,n=a.state.activeIndex;a.setState({activeIndex:n===l?-1:l})},a}return Object(o.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.activeIndex;return n.a.createElement("div",{style:{paddingBottom:20}},n.a.createElement(m.a,{fluid:!0,styled:!0},n.a.createElement(m.a.Title,{active:0===e,index:0,onClick:this.onAccordionClick},n.a.createElement(v.a,{name:"dropdown"}),"About"),n.a.createElement(m.a.Content,{active:0===e},n.a.createElement("p",null,"In this page we will train a simple neural network to recognize handwritten digits from the MNIST dataset.")),n.a.createElement(m.a.Title,{active:1===e,index:1,onClick:this.onAccordionClick},n.a.createElement(v.a,{name:"dropdown"}),"What is MNIST?"),n.a.createElement(m.a.Content,{active:1===e,style:{height:100}},n.a.createElement(we.a,{src:ve.a,size:"tiny",floated:"left",wrapped:!0}),n.a.createElement("p",null,"MNIST is dataset for handwritten digits. It contains 70,000 28x28 black and white images representing the digits zero through nine.",n.a.createElement("br",null),"The data is split into two subsets, with 60,000 images belonging to the training set and 10,000 images belonging to the testing set.",n.a.createElement("br",null),"More info ",n.a.createElement("a",{href:"http://yann.lecun.com/exdb/mnist/",target:"_blank",rel:"noopener noreferrer"},"here"),"."))))}}]),t}(l.Component),be=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).loadDataset=Object(Y.a)(J.a.mark(function t(){return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({datasetLoading:!0}),e.data=new oe,t.next=4,e.data.load();case 4:e.setState({datasetLoaded:!0,datasetLoading:!1});case 5:case"end":return t.stop()}},t)})),e.train=Object(Y.a)(J.a.mark(function t(){var a,l,n,i,s,r;return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({training:!0,status:"Training model..."}),e.model=de(),550,.15,3,a=e.data.getTrainData(),l=e.data.getTestData(),n=3*Math.ceil(.85*ce/550),i=0,t.next=11,e.model.fit(a.xs,a.labels,{batchSize:550,validationSplit:.15,epochs:3,callbacks:{onBatchEnd:function(){var t=Object(Y.a)(J.a.mark(function t(a,l){return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i++,e.setState({status:"Training... (".concat((i/n*100).toFixed(1),"% complete)"),errorData:e.state.errorData.concat(l.loss),accData:e.state.accData.concat(l.acc)}),t.next=4,ie.nextFrame();case 4:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),onEpochEnd:function(){var t=Object(Y.a)(J.a.mark(function t(a,l){return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({errorValData:e.state.errorValData.concat([[i,l.val_loss]]),accValData:e.state.accValData.concat([[i,l.val_acc]])}),t.next=3,ie.nextFrame();case 3:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()}});case 11:s=e.model.evaluate(l.xs,l.labels),r=100*s[1].dataSync()[0],e.setState({trained:!0,status:"Final test accuracy: ".concat(r.toFixed(1),"%")});case 14:case"end":return t.stop()}},t)})),e.getImageData=function(){var t=e.predCanvas.current.getContext("2d");t.clearRect(0,0,re,se),t.drawImage(e.drawCanvas.canvas.drawing,0,0,re,se);var a=t.getImageData(0,0,re,se),l=ie.browser.fromPixels(a,1);return l=l.reshape([1,28,28,1]),(l=ie.cast(l,"float32")).div(ie.scalar(255))},e.predict=Object(Y.a)(J.a.mark(function t(){return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie.tidy(function(){var t=e.getImageData(),a=e.model.predict(t).dataSync(),l=Array.from(a),n=l.indexOf(Math.max.apply(Math,Object(le.a)(l))),i=100*l[n];console.log(l),console.log(n),console.log(i),e.setState({prediction:n,predictionScore:i.toFixed(1)})});case 2:case"end":return t.stop()}},t)})),e.clear=function(){e.drawCanvas.clear(),e.predCanvas.current.getContext("2d").clearRect(0,0,re,se),e.setState({prediction:null,predictionScore:null})},e.state={datasetLoaded:!1,datasetLoading:!1,training:!1,trained:!1,status:null,errorData:[],errorValData:[],accData:[],accValData:[],prediction:null,predictionScore:null},e.predCanvas=n.a.createRef(),e}return Object(o.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.errorData,l=t.accData,i=t.prediction;return n.a.createElement(u.a,{style:{padding:"5em 0em"}},n.a.createElement(fe,null),n.a.createElement(ue,{datasetLoaded:this.state.datasetLoaded,datasetLoading:this.state.datasetLoading,loadDataset:this.loadDataset,train:this.train,training:this.state.training,status:this.state.status}),n.a.createElement(f.a,{columns:2},n.a.createElement(f.a.Row,null,a.length>0&&n.a.createElement(f.a.Column,null,n.a.createElement(j,{title:"Error",trainData:a,valData:this.state.errorValData,yTitle:"error"})),l.length>0&&n.a.createElement(f.a.Column,null,n.a.createElement(j,{title:"Accuracy",trainData:l,valData:this.state.accValData,yTitle:"accuracy"}))),this.state.trained&&n.a.createElement(f.a.Row,null,n.a.createElement(f.a.Column,null,n.a.createElement(b.a.Group,null,n.a.createElement(b.a,null,n.a.createElement("b",null,"Draw"),n.a.createElement("span",{style:{display:"inline",float:"right",verticalAlign:"top"}},n.a.createElement(I.a,{compact:!0,content:"Clear",onClick:this.clear,size:"mini"}),n.a.createElement(I.a,{compact:!0,positive:!0,content:"Predict",onClick:this.predict,size:"mini"}))),n.a.createElement(b.a,{style:{padding:0}},n.a.createElement(_e.a,{ref:function(t){return e.drawCanvas=t},lazyRadius:0,brushRadius:40,canvasWidth:"100%",canvasHeight:540})))),n.a.createElement(f.a.Column,null,n.a.createElement(b.a.Group,null,n.a.createElement(b.a,null,n.a.createElement("b",null,"Prediction")),n.a.createElement(b.a,{style:{height:540}},n.a.createElement(ne.a.Group,null,n.a.createElement(ne.a,null,n.a.createElement(ne.a.Content,{verticalAlign:"top"},n.a.createElement(ne.a.Header,{className:"item-header"},null!==i?"Neural network input (28 x 28 pixels):":"Draw any number and press 'Predict'."),n.a.createElement("canvas",{ref:this.predCanvas,width:28,height:28}))),null!==i&&n.a.createElement(ne.a,null,n.a.createElement(ne.a.Content,{verticalAlign:"middle"},n.a.createElement(ne.a.Header,{className:"item-header"},"Prediction: ",i))),null!==i&&n.a.createElement(ne.a,null,n.a.createElement(ne.a.Content,{verticalAlign:"middle"},n.a.createElement(ne.a.Header,{className:"item-header"},"Prediction accuracy: ",this.state.predictionScore,"%"))))))))))}}]),t}(n.a.Component),Ee=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement(d.a,{basename:"/mlviz"},n.a.createElement("div",null,n.a.createElement(w,null),n.a.createElement(_.a,{path:"/",exact:!0,component:U}),n.a.createElement(_.a,{path:"/gradient_descent",component:U}),n.a.createElement(_.a,{path:"/object_detection",component:ae}),n.a.createElement(_.a,{path:"/mnist",component:be})))}}]),t}(l.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(Ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[277,1,2]]]);
//# sourceMappingURL=main.b10c892c.chunk.js.map